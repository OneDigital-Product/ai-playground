import{c as b,w as j,u as N,d as v,j as e}from"./ErrorBoundary.CguKR82e.js";import{r as a}from"./index.DtoOFyvK.js";import{a as P}from"./api.CYROLObq.js";const C=P;function S(){const{isAuthenticated:p,isLoading:g}=N(),w=v(C.password.changePassword),[n,x]=a.useState(""),[o,d]=a.useState(""),[r,i]=a.useState(""),[l,t]=a.useState(null),[u,c]=a.useState(null),[m,h]=a.useState(!1);if(g)return e.jsx("p",{children:"Loading…"});if(!p)return e.jsx("p",{children:"Please sign in to change your password."});async function f(s){if(s.preventDefault(),t(null),c(null),r.length<8){t("New password must be at least 8 characters.");return}h(!0);try{await w({email:n,currentPassword:o,newPassword:r}),c("Password updated."),d(""),i("")}catch(y){t(y?.message??"Failed to update password.")}finally{h(!1)}}return e.jsxs("div",{className:"mx-auto w-full max-w-md rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"mb-1 text-2xl font-bold",children:"Change password"}),e.jsx("p",{className:"mb-6 text-sm text-gray-600",children:"Enter your email, current password, and a new password."}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",value:n,onChange:s=>x(s.target.value),placeholder:"you@onedigital.com",className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"currentPassword",className:"text-sm font-medium text-gray-700",children:"Current password"}),e.jsx("input",{id:"currentPassword",name:"currentPassword",type:"password",value:o,onChange:s=>d(s.target.value),placeholder:"••••••••",className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"newPassword",className:"text-sm font-medium text-gray-700",children:"New password"}),e.jsx("input",{id:"newPassword",name:"newPassword",type:"password",value:r,onChange:s=>i(s.target.value),placeholder:"Min 8 chars, include 0-9, a-z, A-Z",className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0})]}),l&&e.jsx("p",{className:"text-sm text-red-600",children:l}),u&&e.jsx("p",{className:"text-sm text-green-600",children:u}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{type:"submit",disabled:m,className:"inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-white transition-colors hover:bg-indigo-700 disabled:opacity-50",children:m?"Saving…":"Save"})})]})]})}const q=b(j(S,{boundaryId:"AuthChangePassword"}));export{q as default};
