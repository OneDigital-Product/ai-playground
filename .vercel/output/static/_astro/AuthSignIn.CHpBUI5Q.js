import{c as f,w as h,e as b,j as e}from"./ErrorBoundary.CguKR82e.js";import{r}from"./index.DtoOFyvK.js";function y(s){return/@onedigital\.com$/i.test(s)}function w(s){return s.length>=8&&/[0-9]/.test(s)&&/[a-z]/.test(s)&&/[A-Z]/.test(s)}function j(){const{signIn:s}=b(),[t,u]=r.useState("signIn"),[o,n]=r.useState(null),[l,d]=r.useState(!1);async function m(i){i.preventDefault(),n(null);const g=i.currentTarget,a=new FormData(g),p=String(a.get("email")||"").trim(),x=String(a.get("password")||"");if(!y(p)){n("Email must be @onedigital.com");return}if(t==="signUp"&&!w(x)){n("Password must be 8+ chars and include a number, lowercase and uppercase letter.");return}d(!0);try{a.set("flow",t),(await s("password",a)).signingIn}catch(c){n(c?.message??"Sign-in failed. Please try again.")}finally{d(!1)}}return e.jsxs("div",{className:"mx-auto w-full max-w-md rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h2",{className:"mb-1 text-2xl font-bold",children:t==="signIn"?"Sign in":"Create your account"}),e.jsx("p",{className:"mb-6 text-sm text-gray-600",children:"Use your @onedigital.com email and password."}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",placeholder:"you@onedigital.com",className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",placeholder:t==="signUp"?"Min 8 chars, include 0-9, a-z, A-Z":"••••••••",className:"w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0})]}),e.jsx("input",{type:"hidden",name:"flow",value:t}),o&&e.jsx("p",{className:"text-sm text-red-600",children:o}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("button",{type:"submit",disabled:l,className:"inline-flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-white transition-colors hover:bg-indigo-700 disabled:opacity-50",children:l?"Submitting…":t==="signIn"?"Sign in":"Sign up"}),e.jsx("button",{type:"button",onClick:()=>{n(null),u(i=>i==="signIn"?"signUp":"signIn")},className:"text-sm text-indigo-700 hover:underline",children:t==="signIn"?"Need an account? Sign up":"Have an account? Sign in"})]})]})]})}const v=f(h(j,{boundaryId:"AuthSignIn"}));export{v as default};
